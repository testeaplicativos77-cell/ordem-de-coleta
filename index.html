<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ordem de Coleta - Nadir</title>

<script src="https://cdn.emailjs.com/dist/email.min.js"></script>
<script>
   // Script de envio EmailJS
   (function(){emailjs.init("8e38EbwlhycluKZKM");})(); // chave de init

   function sendEmail(e){
       e.preventDefault();
       const btn = document.getElementById('submit-btn');
       btn.disabled = true;
       btn.textContent = 'Enviando...';

       emailjs.sendForm('service_tgq7omd','template_m0my19g', e.target)
       .then(()=>{ 
           alert("E-mail enviado com sucesso!"); 
           e.target.reset(); 
           btn.disabled = false;
           btn.textContent = 'Enviar Ordem';
           atualizarObrigatoriedadePlacas();
       })
       .catch(err=>{ 
           alert("Erro ao enviar: "+err.text); 
           btn.disabled = false;
           btn.textContent = 'Enviar Ordem';
       });
   }

   const veiculosPlaca2 = [
        'CARRETA BAU ATE 18000', 'CARRETA ABERTA ATE 18000', 'CARRETA SIDER ATE 18000',
        'CARRETA BAU ATE 25000', 'CARRETA ABERTA ATE 25000', 'CARRETA SIDER ATE 25000',
        'CONTAINER 20 DRY', 'CONTAINER 40 DRY',
        'CARRETA BAU ATE 27000', 'CARRETA ABERTA ATE 27000', 'CARRETA SIDER ATE 27000',
        'CONTAINER 40 HC', 'CONTAINER 40 HC LS',
        'CARRETA BAU ATE 32000', 'CARRETA ABERTA ATE 32000', 'CARRETA SIDER ATE 32000'
    ];
    const veiculosPlaca3 = ['Bitrem', 'Rodotrem']; 

    function setRequired(inputId, spanId, isRequired) {
        const input = document.getElementById(inputId);
        const star = document.getElementById(spanId);
        if(input && star){
            input.required = isRequired;
            star.style.display = isRequired ? 'inline' : 'none';
        }
    }

    function atualizarObrigatoriedadePlacas(){
        const selectVeiculo = document.getElementById('tipo_veiculo');
        if(!selectVeiculo) return;
        const veiculoSelecionado = selectVeiculo.value;

        if(veiculosPlaca3.includes(veiculoSelecionado)){
            setRequired('placa2','placa2-star',true);
            setRequired('placa3','placa3-star',true);
        } else if(veiculosPlaca2.includes(veiculoSelecionado)){
            setRequired('placa2','placa2-star',true);
            setRequired('placa3','placa3-star',false);
        } else {
            setRequired('placa2','placa2-star',false);
            setRequired('placa3','placa3-star',false);
        }
    }

    document.addEventListener('DOMContentLoaded', function(){
        const selectVeiculo = document.getElementById('tipo_veiculo');
        if(selectVeiculo){
            selectVeiculo.addEventListener('change', atualizarObrigatoriedadePlacas);
            atualizarObrigatoriedadePlacas(); 
        }
    });
</script>

<style>
body { font-family: Arial, sans-serif; background-color:#f0f2f5; display:flex; justify-content:center; padding:10px; }
.form-container { width:100%; max-width:600px; background:#fff; border:2px solid #000; padding:5px; box-sizing:border-box; }
.form-header { text-align:center; margin-bottom:10px; }
.form-header .main-title { margin:0; font-size:16px; line-height:1.2; font-weight:bold; color: #0033a0; }
.form-header h1 { margin:5px 0; font-size:18px; line-height:1.2; }
.form-header p { margin:0; font-size:10px; color: #d90000; }
.section { border:1px solid #000; margin-bottom:5px; display:flex; flex-wrap:wrap; }
.section-title { background-color:#ccc; border-bottom:1px solid #000; padding:5px; text-align:center; font-weight:bold; font-size:12px; width:100%; box-sizing:border-box; }
.cell { border-right:1px solid #000; border-bottom:1px solid #000; padding:5px; box-sizing:border-box; display:flex; flex-direction:column; justify-content:flex-end; font-size:11px; min-height:40px; }
.cell:last-child { border-right:none; }
.row-cells .cell { border-bottom:none; }
.cell label { font-size:10px; font-weight:bold; margin-bottom:2px; color:#555; }
.cell input, .cell select { border:none; padding:1px 0; font-size:12px; width:100%; background-color:transparent; }
.cell input:focus, .cell select:focus { outline:none; }
.required-star { color: #d90000; font-weight: bold; margin-left: 2px; }
.grid-1 { display:grid; grid-template-columns:1fr; width:100%; }
.grid-2 { display:grid; grid-template-columns:1fr 1fr; width:100%; }
.grid-3 { display:grid; grid-template-columns:1fr 1fr 1fr; width:100%; }
.grid-4 { display:grid; grid-template-columns:1fr 1fr 1fr 1fr; width:100%; }
.grid-5 { display:grid; grid-template-columns:1fr 1fr 1fr 1fr 1fr; width:100%; }
.section.mercado-exportacao { display: flex; justify-content: space-around; align-items: center; border: 1px solid #000; margin-bottom: 5px; }
.mercado-exportacao .cell { flex: 1; border: none !important; min-height: 25px; padding: 10px 5px; text-align: center; border-right: 1px solid #000 !important; }
.mercado-exportacao .cell:last-child { border-right: none !important; }
.mercado-exportacao label { font-size: 11px; font-weight: bold; color: #000; display: block; margin-bottom: 0; }
.row-subgrid { display:grid; grid-template-columns:1fr 2fr; width:100%; }
.row-subgrid .cell { border-bottom:none; }
.left-veiculos { border-right:1px solid #000; }
.right-veiculos { display:flex; flex-direction:column; }
.right-veiculos > .cell { border-bottom:1px solid #000; }
.submit-button { width:100%; padding:10px; background-color:#0033a0; color:white; border:none; border-radius:0; font-weight:bold; cursor:pointer; margin-top:10px; }
.submit-button:disabled { background-color:#ccc; cursor:not-allowed; }
@media (max-width: 450px) {
    .grid-1, .grid-2, .grid-3, .grid-4, .grid-5, .row-subgrid, .section { display:block; }
    .cell { border-right:none; border-bottom:1px solid #000; width:100% !important; }
    .row-cells .cell { border-bottom:1px solid #000; }
    .section.top-info > .cell { border-right:none !important; }
    .section.top-info > .cell:last-child { border-bottom:1px solid #000; }
    .section.mercado-exportacao { flex-direction: column; }
    .mercado-exportacao .cell { border-right: none !important; border-bottom: 1px solid #000 !important; }
    .mercado-exportacao .cell:last-child { border-bottom: none !important; }
}
</style>
</head>
<body>

<div class="form-container">
    <div class="form-header">
        <div class="main-title">NADIR</div>
        <h1>ORDEM DE COLETA</h1>
        <p>Av. Nadir Dias de Figueiredo 496 - Jardim Mirian - Suzano - SP<br>CEP: 08.613-370</p>
    </div>

    <form id="coleta-form" onsubmit="sendEmail(event)">
        
        <div class="section mercado-exportacao">
            <div class="cell">
                <label>Doméstico</label>
                <input type="checkbox" name="mercado_domestico" value="Doméstico" style="height:10px; margin-top: 5px;">
            </div>
            <div class="cell">
                <label>Embalagem</label>
                <input type="checkbox" name="mercado_embalagem" value="Embalagem" style="height:10px; margin-top: 5px;">
            </div>
            <div class="cell">
                <label>Exportação</label>
                <input type="checkbox" name="mercado_exportacao" value="Exportação" style="height:10px; margin-top: 5px;">
            </div>
        </div>
        
        <div class="section" style="display:flex; flex-direction:column;">
            <div class="grid-2">
                <div class="cell">
                    <label for="tipo_frete">Tipo de Frete<span class="required-star">*</span></label>
                    <select id="tipo_frete" name="tipo_frete" required>
                        <option value="">Selecione</option>
                        <option value="CIF">CIF</option>
                        <option value="FOB">FOB</option>
                    </select>
                </div>
                <div class="cell">
                    <label for="transportadora">Transportadora<span class="required-star">*</span></label>
                    <input type="text" id="transportadora" name="transportadora" required>
                </div>
            </div>
            
            <div class="grid-2" style="border-top:1px solid #000;">
                 <div class="cell">
                    <label for="email_transportadora">Email Transportadora</label>
                    <input type="email" id="email_transportadora" name="email_transportadora">
                </div>
                <div class="cell">
                    <label for="cliente">Cliente<span class="required-star">*</span></label>
                    <input type="text" id="cliente" name="cliente" required>
                </div>
            </div>

            <div class="grid-2" style="border-top:1px solid #000;">
                 <div class="cell">
                    <label for="tipo_carga">Tipo de Carga<span class="required-star">*</span></label>
                    <select id="tipo_carga" name="tipo_carga" required>
                        <option value="">Selecione</option>
                        <option value="CB">CB</option>
                        <option value="CP">CP</option>
                        <option value="CM">CM</option>
                    </select>
                </div>
                <div class="cell">
                    <label for="pedido">Pedido<span class="required-star">*</span></label>
                    <input type="text" id="pedido" name="pedido" required>
                </div>
            </div>

            <div class="grid-2" style="border-top:1px solid #000;">
                <div class="cell">
                    <label for="dt">Documento de Transporte (DT)<span class="required-star">*</span></label>
                    <input type="text" id="dt" name="dt" required>
                </div>
                <div class="cell"></div>
            </div>

            <div class="grid-2" style="border-top:1px solid #000;">
                <div class="cell" style="border-bottom:none; border-right:1px solid #000;">
                    <label for="data_carregamento">Data Carregamento<span class="required-star">*</span></label>
                    <input type="date" id="data_carregamento" name="data_carregamento" required>
                </div>
                <div class="cell" style="border-bottom:none; border-right:none;">
                    <label for="horario_carregamento">Horário Carregamento<span class="required-star">*</span></label>
                    <input type="time" id="horario_carregamento" name="horario_carregamento" required>
                </div>
            </div>
        </div>

        <div class="section">
            <div class="section-title">Dados do Motorista</div>
            <div class="grid-2">
                <div class="cell">
                    <label for="nome_motorista">Nome Motorista<span class="required-star">*</span></label>
                    <input type="text" id="nome_motorista" name="nome_motorista" required>
                </div>
                <div class="cell">
                    <label for="rg">CNH / R.G.<span class="required-star">*</span></label>
                    <input type="text" id="rg" name="rg" required>
                </div>
            </div>

            <div class="grid-2" style="border-top:1px solid #000;">
                 <div class="cell" style="border-bottom:none;">
                    <label for="telefone">Telefone<span class="required-star">*</span></label>
                    <input type="tel" id="telefone" name="telefone" required>
                </div>
                 <div class="cell" style="border-bottom:none; border-right:none;"></div>
            </div>
        </div>

        <div class="section">
            <div class="section-title">DETALHES DO VEÍCULO E CARGA</div>
            <div class="row-subgrid">
                <div class="left-veiculos">
                    <div class="cell" style="min-height:auto;">
                        <label for="tipo_veiculo">Veículo<span class="required-star">*</span></label>
                        <select id="tipo_veiculo" name="tipo_veiculo" required style="font-size:11px;">
                            <option value="">Selecione o tipo de veículo</option>
                            <option value="FIORINO ATE 500">FIORINO ATE 500</option>
                            <option value="KOMBI ATE 900">KOMBI ATE 900</option>
                            <option value="MB ATE 1200">MB ATE 1200</option>
                            <option value="HR BAU ATE 1500">HR BAU ATE 1500</option>
                            <option value="HR ABERTO ATE 1500">HR ABERTO ATE 1500</option>
                            <option value="HR SIDER ATE 1500">HR SIDER ATE 1500</option>
                            <option value="LEVE BAU ATE 1800">LEVE BAU ATE 1800</option>
                            <option value="LEVE ABERTO ATE 1800">LEVE ABERTO ATE 1800</option>
                            <option value="LEVE SIDER ATE 1800">LEVE SIDER ATE 1800</option>
                            <option value="LEVE BAU ATE 2000">LEVE BAU ATE 2000</option>
                            <option value="LEVE ABERTO 2000">LEVE ABERTO 2000</option>
                            <option value="LEVE SIDER ATE 2000">LEVE SIDER ATE 2000</option>
                            <option value="LEVE BAU ATE 2500">LEVE BAU ATE 2500</option>
                            <option value="LEVE ABERTO ATE 2500">LEVE ABERTO ATE 2500</option>
                            <option value="LEVE SIDER ATE 2500">LEVE SIDER ATE 2500</option>
                            <option value="LEVE BAU ATE 3000">LEVE BAU ATE 3000</option>
                            <option value="LEVE ABERTO ATE 3000">LEVE ABERTO ATE 3000</option>
                            <option value="LEVE SIDER ATE 3000">LEVE SIDER ATE 3000</option>
                            <option value="LEVE BAU ATE 3500">LEVE BAU ATE 3500</option>
                            <option value="LEVE ABERTO ATE 3500">LEVE ABERTO ATE 3500</option>
                            <option value="LEVE SIDER ATE 3500">LEVE SIDER ATE 3500</option>
                            <option value="TOCO BAU ATE 6000">TOCO BAU ATE 6000</option>
                            <option value="TOCO ABERTO ATE 6000">TOCO ABERTO ATE 6000</option>
                            <option value="TOCO SIDER ATE 6000">TOCO SIDER ATE 6000</option>
                            <option value="TRUCK BAU ATE 12000">TRUCK BAU ATE 12000</option>
                            <option value="TRUCK ABERTO ATE 12000">TRUCK ABERTO ATE 12000</option>
                            <option value="TRUCK SIDER ATE 12000">TRUCK SIDER ATE 12000</option>
                            <option value="TRUCK BAU ATE 13000">TRUCK BAU ATE 13000</option>
                            <option value="TRUCK ABERTO ATE 13000">TRUCK ABERTO ATE 13000</option>
                            <option value="TRUCK SIDER ATE 13000">TRUCK SIDER ATE 13000</option>
                            <option value="TRUCK BAU ATE 14000">TRUCK BAU ATE 14000</option>
                            <option value="TRUCK ABERTO ATE 14000">TRUCK ABERTO ATE 14000</option>
                            <option value="BITRUCK BAU ATE 14000">BITRUCK BAU ATE 14000</option>
                            <option value="TRUCK SIDER ATE 14000">TRUCK SIDER ATE 14000</option>
                            <option value="CARRETA BAU ATE 18000">CARRETA BAU ATE 18000</option>
                            <option value="CARRETA ABERTA ATE 18000">CARRETA ABERTA ATE 18000</option>
                            <option value="CARRETA SIDER ATE 18000">CARRETA SIDER ATE 18000</option>
                            <option value="CARRETA BAU ATE 25000">CARRETA BAU ATE 25000</option>
                            <option value="CARRETA ABERTA ATE 25000">CARRETA ABERTA ATE 25000</option>
                            <option value="CARRETA SIDER ATE 25000">CARRETA SIDER ATE 25000</option>
                            <option value="CONTAINER 20 DRY">CONTAINER 20 DRY</option>
                            <option value="CONTAINER 40 DRY">CONTAINER 40 DRY</option>
                            <option value="CARRETA BAU ATE 27000">CARRETA BAU ATE 27000</option>
                            <option value="CARRETA ABERTA ATE 27000">CARRETA ABERTA ATE 27000</option>
                            <option value="CARRETA SIDER ATE 27000">CARRETA SIDER ATE 27000</option>
                            <option value="CONTAINER 40 HC">CONTAINER 40 HC</option>
                            <option value="CONTAINER 40 HC LS">CONTAINER 40 HC LS</option>
                            <option value="CARRETA BAU ATE 32000">CARRETA BAU ATE 32000</option>
                            <option value="CARRETA ABERTA ATE 32000">CARRETA ABERTA ATE 32000</option>
                            <option value="CARRETA SIDER ATE 32000">CARRETA SIDER ATE 32000</option>
                            <option value="Bitrem">Bitrem</option>
                            <option value="Rodotrem">Rodotrem</option>
                            <!-- restante omitido para brevidade, manter todas do seu HTML original -->
                        </select>
                    </div>
                </div>

                <div class="right-veiculos">
                    <div class="cell grid-3" style="border-right:none;">
                         <div class="cell" style="border-right:1px solid #000; border-bottom:none;">
                            <label>Peso Carga (kg)</label>
                            <input type="text" name="peso_carga">
                        </div>
                        <div class="cell" style="border-right:1px solid #000; border-bottom:none;">
                            <label>Cubagem da Carga</label>
                            <input type="text" name="cubagem_carga">
                        </div>
                        <div class="cell" style="border-right:none; border-bottom:none;">
                            <label>Altura Veículo</label>
                            <input type="text" name="altura_veiculo">
                        </div>
                    </div>
                    
                    <div class="cell grid-2" style="border-right:none;">
                        <div class="cell" style="border-right:1px solid #000;">
                            <label>Largura Veículo</label>
                            <input type="text" name="largura_veiculo">
                        </div>
                        <div class="cell" style="border-right:none;">
                            <label>Cubagem Veículo</label>
                            <input type="text" name="cubagem_veiculo">
                        </div>
                    </div>
                    
                    <div class="cell grid-3" style="border-right:none; border-top:1px solid #000;">
                        <div class="cell" style="border-right:1px solid #000; border-bottom:none;">
                             <label for="placa1">Placa 1<span class="required-star">*</span></label>
                            <input type="text" id="placa1" name="placa1" required>
                        </div>
                        <div class="cell" style="border-right:1px solid #000; border-bottom:none;">
                            <label for="placa2">Placa 2<span class="required-star" id="placa2-star" style="display: none;">*</span></label>
                            <input type="text" id="placa2" name="placa2">
                        </div>
                        <div class="cell" style="border-right:none; border-bottom:none;">
                            <label for="placa3">Placa 3<span class="required-star" id="placa3-star" style="display: none;">*</span></label>
                            <input type="text" id="placa3" name="placa3">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="section" style="border-top:1px solid #000;">
            <div class="section-title">EXPORTAÇÃO</div>
            <div class="grid-1" style="width:100%; margin-top:5px;">
                <div class="cell" style="text-align:center; border-bottom:none; border-right:none;">
                    <label for="n_container">N° Container (letras e números)</label>
                    <input type="text" id="n_container" name="n_container" style="text-align: center;">
                </div>
            </div>
        </div>

        <button type="submit" class="submit-button" id="submit-btn">ENVIAR ORDEM DE COLETA</button>
    </form>
</div>

</body>
</html>

